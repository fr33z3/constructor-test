(function(){var BANNER_IMG_STYLE,BannerPlacement,ConstructorPanel,PANEL_BACKGROUND_STYLE,PANEL_STYLE,dragEnter,draggedElement,generatePlacements,placements;PANEL_BACKGROUND_STYLE={left:0,top:0,position:"absolute",width:"100%",height:"100%",opacity:.7,transition:"left 0.8s","background-color":"black"};PANEL_STYLE={left:0,top:0,position:"absolute",transition:"left 0.8s",width:"100%",heigth:"100%"};BANNER_IMG_STYLE={margin:"10px"};ConstructorPanel=function(){function ConstructorPanel(){this.banners=[];this.background=$dom.create("div#constructor-panel-background");this.panel=$dom.create("div#constructor-panel");$dom.style(this.background,PANEL_BACKGROUND_STYLE);$dom.style(this.panel,PANEL_STYLE)}ConstructorPanel.prototype.addBanner=function(banner){this.banners.push(banner);return this.panel.appendChild(banner.previewImage)};ConstructorPanel.prototype.removeBanner=function(banner){return this.banners.push(banner)};ConstructorPanel.prototype.width=function(){return this.background.clientWidth};ConstructorPanel.prototype.show=function(){$dom.style(this.background,{left:"0px"});return $dom.style(this.panel,{left:"0px"})};ConstructorPanel.prototype.hide=function(){$dom.style(this.background,{left:""+-this.width()+"px"});return $dom.style(this.panel,{left:""+-this.width()+"px"})};ConstructorPanel.prototype.attachTo=function(element){element.appendChild(this.background);return element.appendChild(this.panel)};return ConstructorPanel}();draggedElement=void 0;this.Banner=function(){function Banner(uri){this.uri=uri;this.previewImage=$dom.create("img.banner");$dom.style(this.previewImage,BANNER_IMG_STYLE);this.previewImage.onload=this.normalizePreview.bind(this);this.previewImage.src=this.uri;this.previewImage.draggable=true;this._image=$dom.create("img.banner");this._image.src=this.uri;this.previewImage.addEventListener("dragstart",this.previewElementDragStart.bind(this),false);this._image.addEventListener("dragstart",this.previewElementDragStart.bind(this),false)}Banner.prototype.previewWidth=function(){return this.previewImage.naturalWidth};Banner.prototype.previewHeight=function(){return this.previewImage.naturalHeight};Banner.prototype.normalizePreview=function(){if(this.previewWidth()>400){return this.previewImage.width=400}else if(this.previewHeight()>100){return this.previewImage.height=100}};Banner.prototype.previewElementDragStart=function(event){draggedElement=this;return setTimeout(function(){return constructorPanel.hide()},1)};Banner.prototype.image=function(){return this._image};return Banner}();dragEnter=function(event){var target;target=event.target;return target.appendChild(draggedElement.image())};$dom.onready(function(){var el,placementElements,_i,_len,_results;placementElements=$dom.get(".placement");_results=[];for(_i=0,_len=placementElements.length;_i<_len;_i++){el=placementElements[_i];_results.push(el.addEventListener("dragenter",dragEnter,false))}return _results});BannerPlacement=function(){function BannerPlacement(docElement,type){this.docElement=docElement;this.type=type;this.el=$dom.create("div.placement");if(this.type==="before"){this.placeBefore()}else{this.placeAfter()}}BannerPlacement.prototype.placeAfter=function(){var next,parent;parent=this.docElement.parentNode;next=this.docElement.nextSibling;if(next){return parent.insertBefore(this.el,next)}else{return parent.appendChild(this.el)}};BannerPlacement.prototype.placeBefore=function(){var parent;parent=this.docElement.parentNode;return parent.insertBefore(this.el,this.docElement)};return BannerPlacement}();this.constructorPanel=new ConstructorPanel;placements=[];generatePlacements=function(){var node,nodesOfInterest,_i,_len,_results;nodesOfInterest=$dom.get("body *");_results=[];for(_i=0,_len=nodesOfInterest.length;_i<_len;_i++){node=nodesOfInterest[_i];placements.push(new BannerPlacement(node,"before"));_results.push(placements.push(new BannerPlacement(node,"after")))}return _results};({checkForInterest:function(el){return el.id!=="constrcutor-panel"}});$dom.onready(function(_this){return function(){_this.constructorPanel.attachTo(document.body);return generatePlacements()}}(this));this.firstBanner=function(){return new Banner("https://s3-ap-southeast-1.amazonaws.com/asia-user-profile/pictures/1045/original.gif?1419598643")};this.secondBanner=function(){return new Banner("http://static.aforextrading.com/pictures/1036/original.gif")};this.constructorPanel.addBanner(this.firstBanner());this.constructorPanel.addBanner(this.secondBanner())}).call(this);(function(a){function q(a,b,c){var d=r(b),e=p[d];return e&&e.set?e.set(a,c):a.style[d]=c}function r(a){return o[a]||(o[a]=a.replace(l,function(a,b){return b.toUpperCase()}))}function s(a,c,d){var f;if(d===b){if(typeof c=="string")return e(a,c)||0;for(f in c)q(a,f,c[f])}else q(a,c,d)}function t(a){var c,d=[];if(typeof a=="string")while(a){c=a.match(k);if(c[0]==="")break;d.push({rel:c[1],uTag:(c[2]||"").toUpperCase(),id:c[3],classes:c[4]?c[4].split("."):b}),a=a.substring(c[0].length)}return d}function u(a,b){while((a=a.parentNode)&&a!==b);return a!==null}function v(a,b){function s(a,b){var c=b.id?(d=(a&&a.ownerDocument||g).getElementById(b.id))&&u(d,a)?[d]:[]:v(a.getElementsByTagName(b.uTag||"*")),d=c.length;if(d>0&&(b.id||b.classes))while(d--)w(c[d],b)||c.splice(d,1);return c}function v(a){var b,c,d;try{return Array.prototype.slice.call(a)}catch(e){b=[];for(c=0,d=a.length;c<d;c++)b.push(a[c]);return b}}function x(a){var b;for(b=c.length;b--;)if(c[b]===a)return i;return j}var c,d,e,f,h,k,l,m,n,o,p,q,r;c=[],d=[a],e=t(b),e.length||(e=[{}]);for(f=0,h=e.length;f<h;f++){o=e[f];for(k=0,l=d.length;k<l;k++){p=d[k];switch(o.rel){case">":r=p.childNodes;for(m=0,n=r.length;m<n;m++)w(r[m],o)&&c.push(r[m]);break;case"~":while(p=p.nextSibling)if(w(p,o)){if(x(p))break;c.push(p)}break;case"+":while((p=p.nextSibling)&&p.nodeType!==1);p&&w(p,o)&&c.push(p);break;default:q=s(p,o);if(f>0)for(m=0,n=q.length;m<n;m++)x(q[m])||c.push(q[m]);else c=c.concat(q)}}if(!c.length)return[];d=c.splice(0,c.length)}return d}function w(a,b){var c,d,e;return b?(c=b.uTag,d=b.id,e=b.classes,a.nodeType===1&&(!c||c===a.tagName)&&(!d||d===a.id)&&(!e||!!A(a,e))):!0}function x(a,b,c){c=t(c)[0];while(a&&!w(a,c)&&(a=a[b]));return a}function y(a,b){return b=t(b)[0],a&&w(a,b)}function z(a,b,c){return x(a[b],b,c)}function A(a,b){var c;if(a.className==="")return j;for(c=0;c<b.length;c++)if(!K(a,b[c]))return j;return i}function B(){function e(){var d,e;if(!b){b=!0,c&&(c=a.clearTimeout(c));for(d=0,e=m.length;d<e;d++)m[d]()}}function f(){try{h.doScroll("left")}catch(b){a.setTimeout(f,20);return}e()}var b,c,d;if(g.addEventListener)g.addEventListener("DOMContentLoaded",e,j),g.addEventListener("load",e,j);else if(g.attachEvent){g.attachEvent("onload",e),d=!1;try{d=a.frameElement===null}catch(i){}d&&h.doScroll&&f()}}function C(a,b){var c,d,e,f=t(a)[0],h=f.uTag;return h?(c=(b||g).createElement(h),d=f.id,e=f.classes,d&&(c.id=d),e&&(c.className=e.join(" ")),c):null}function D(b){/loaded|complete|interactive/.test(g.readyState)?a.setTimeout(b,0):m.push(b)}function E(a,b){return v(b||h,a)}function F(a,b){return z(a,"parentNode",b)}function G(a,b){return z(a,"nextSibling",b)}function H(a,b){return z(a,"previousSibling",b)}function I(a,b){return a=a.parentNode.firstChild,x(a,"nextSibling",b)}function J(a,b){return a=a.parentNode.lastChild,x(a,"previousSibling",b)}function K(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1}function L(a,b){K(a,b)||(a.className+=" "+b)}function M(a,b){K(a,b)&&(a.className=a.className.replace(RegExp("(^|\\s)"+b+"(\\s|$)")," ").replace(/\s$/,""))}function N(a,b,c){(c?L:M)(a,b)}function O(a){return g.createTextNode(a)}function P(a,b,c){a.setAttribute(b,""+c)}function Q(a,b){return a.getAttribute(b)||null}function R(a,c,d){var e;if(typeof c=="object"){for(e in c)P(a,e,c[e]);return}if(d===b)return Q(a,c);P(a,c,d)}function S(a){while(a.firstChild)a.removeChild(a.firstChild)}function T(a,b){var c;b||(b=a,a=this);for(c in b)a[c]=b[c]}var b,c,d,e,f,g=a.document,h=g.documentElement,i=!0,j=!1,k=/^\s*([>+~])?\s*([*\w-]+)?(?:#([\w-]+))?(?:\.([\w.-]+))?\s*/,l=/-(\w)/g,m=[],n=[],o={"float":"cssFloat"in h.style?"cssFloat":"styleFloat"},p={borderWidth:{get:function(a){return e(a,"border-left-width")}},padding:{get:function(a){return e(a,"padding-left")}},margin:{get:function(a){return e(a,"margin-left")}}};!("opacity"in h.style)&&"filters"in h&&(p.opacity={set:function(a,b){var c=a.filters.alpha;c?c.opacity=b*100:a.style.filter+=" Alpha(opacity="+b*100+")"},get:function(a){var b=a.filters.alpha;return b?b.opacity/100:1}}),"clientWidth"in h&&(p.width={get:function(a){return a.style.width||a.clientWidth||a.offsetWidth}}),"clientHeight"in h&&(p.height={get:function(a){return a.style.height||a.clientHeight||a.offsetHeight}}),c=a.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(b,c,d){var e=b.uniqueID+c+d;n[e]=function(){var c=a.event;return c.target=c.srcElement||g,c.currentTarget=b,c.preventDefault=function(){c.returnValue=!1},c.stopPropagation=function(){c.cancelBubble=!0},d.call(b,c)},b.attachEvent("on"+c,n[e])},d=a.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){var d=a.uniqueID+b+c;a.detachEvent("on"+b,n[d]),delete n[d]},e=g.defaultView&&g.defaultView.getComputedStyle?function(a,b){var c=r(b),d=p[c];return d&&d.get?d.get(a):a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(b)}:function(a,b){var c=r(b),d=p[c];return d&&d.get?d.get(a):a.currentStyle[c]},f={create:C,onready:D,addEvent:c,removeEvent:d,get:E,descendants:v,ancestor:F,next:G,previous:H,first:I,last:J,empty:S,is:y,text:O,attr:R,hasClass:K,addClass:L,removeClass:M,toggleClass:N,style:s,extend:T},a.$dom=f,B()})(this);